---
sidebar_position: 3
---

# Control

The square connector at the end of the Blade main purpose is to connect a Fan Unit.
The output is 5V and should work with any fan that supports 5V.
The speed of the fan can be controlled with PWM.

But it can be used to control any 5v PWM fan. Or as an additional UART port (UART5 on CM4)

## UART connection (Smart Fan Unit)

Enable `uart5` in `config.txt` by adding:

```txt
dtoverlay=uart5
```

More Coming SooN...

## PWM fan (STA Fan Unit)

:::note
    When Using the STA Fan Unit the speed of the fan can only be controled form `port A`
:::

The using `GPIO12` and `GPIO13` the compute module can pass a PWM signal to the fan. Using a [python script](https://github.com/uptime-industries/compute-blade-pwm-fan-control) you can Read and control the Fan.

Clone the Github repository to your blade
```bash
git clone https://github.com/uptime-industries/compute-blade-pwm-fan-control.git
cd ./compute-blade-pwm-fan-control/
```
To Read the The fan speed
```bash
python ./read_fan_speed.py
```
To control the fan speed
```bash
python ./fan_control.py
```
To run the script in the use `nohup`
```bash
nohup python fan_control.py
```
:::note
[`nohup`](https://en.wikipedia.org/wiki/Nohup) is a POSIX command which means "no hang up".
Its purpose is to execute a command such thatit ignores the HUP (hangup) signal
and therefore does not stop when the user logs out.
:::